{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport * as React from 'react';\nvar blockStyle = {\n  width: 350,\n  overflow: 'hidden',\n  borderRadius: '6px',\n  display: 'block'\n};\nvar iframeStyle = {\n  width: '100%',\n  display: 'block',\n  overflow: 'hidden',\n  borderRadius: '8px'\n};\nvar Imgur = function (_super) {\n  __extends(Imgur, _super);\n  function Imgur() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.state = {\n      height: 0\n    };\n    _this.mounted = false;\n    _this.onMessage = function (_a) {\n      var data = _a.data;\n      if (!_this.mounted) return;\n      if (typeof data !== 'string') return;\n      try {\n        var json = JSON.parse(data);\n        if (json.message !== 'resize_imgur') return;\n        if (typeof json.href !== 'string') return;\n        if (json.href !== _this.src()) return;\n        if (typeof json.height !== 'number') return;\n        _this.setState({\n          height: json.height\n        });\n      } catch (_b) {}\n    };\n    return _this;\n  }\n  Imgur.prototype.componentDidMount = function () {\n    this.mounted = true;\n    window.addEventListener('message', this.onMessage);\n  };\n  Imgur.prototype.componentWillUnmount = function () {\n    this.mounted = false;\n    window.removeEventListener('message', this.onMessage);\n  };\n  Imgur.prototype.src = function () {\n    return \"https://imgur.com/a/\".concat(this.props.id, \"/embed?pub=true&w=340\");\n  };\n  Imgur.prototype.render = function () {\n    var state = this.state;\n    var height = state.height || 0;\n    return this.props.renderWrap(React.createElement(\"div\", {\n      style: __assign(__assign({}, blockStyle), {\n        border: height ? '1px solid #E5E9F2' : ''\n      })\n    }, React.createElement(\"iframe\", {\n      scrolling: \"no\",\n      frameBorder: \"0\",\n      src: this.src(),\n      style: __assign(__assign({}, iframeStyle), {\n        height: height\n      })\n    })));\n  };\n  return Imgur;\n}(React.Component);\nexport default Imgur;","map":{"version":3,"names":["React","blockStyle","width","overflow","borderRadius","display","iframeStyle","Imgur","_super","__extends","_this","apply","arguments","state","height","mounted","onMessage","_a","data","json","JSON","parse","message","href","src","setState","_b","prototype","componentDidMount","window","addEventListener","componentWillUnmount","removeEventListener","concat","props","id","render","renderWrap","createElement","style","__assign","border","scrolling","frameBorder","Component"],"sources":["../../../src/blocks/imgur/index.tsx"],"sourcesContent":[null],"mappings":";AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAG9B,IAAMC,UAAU,GAAG;EACjBC,KAAK,EAAE,GAAG;EACVC,QAAQ,EAAE,QAAQ;EAClBC,YAAY,EAAE,KAAK;EACnBC,OAAO,EAAE;CACV;AAED,IAAMC,WAAW,GAAG;EAClBJ,KAAK,EAAE,MAAM;EACbG,OAAO,EAAE,OAAO;EAChBF,QAAQ,EAAE,QAAQ;EAClBC,YAAY,EAAE;CACf;AAMD,IAAAG,KAAA,aAAAC,MAAA;EAAoBC,SAAA,CAAAF,KAAA,EAAAC,MAAA;EAApB,SAAAD,MAAA;IAAA,IAAAG,KAAA,GAAAF,MAAA,aAAAA,MAAA,CAAAG,KAAA,OAAAC,SAAA;IACEF,KAAA,CAAAG,KAAK,GAAe;MAClBC,MAAM,EAAE;KACT;IACDJ,KAAA,CAAAK,OAAO,GAAG,KAAK;IAafL,KAAA,CAAAM,SAAS,GAAG,UAACC,EAAM;UAALC,IAAI,GAAAD,EAAA,CAAAC,IAAA;MAChB,IAAI,CAACR,KAAI,CAACK,OAAO,EAAE;MACnB,IAAI,OAAOG,IAAI,KAAK,QAAQ,EAAE;MAC9B,IAAI;QACF,IAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,IAAI,CAAC;QAC7B,IAAIC,IAAI,CAACG,OAAO,KAAK,cAAc,EAAE;QACrC,IAAI,OAAOH,IAAI,CAACI,IAAI,KAAK,QAAQ,EAAE;QACnC,IAAIJ,IAAI,CAACI,IAAI,KAAKb,KAAI,CAACc,GAAG,EAAE,EAAE;QAC9B,IAAI,OAAOL,IAAI,CAACL,MAAM,KAAK,QAAQ,EAAE;QACrCJ,KAAI,CAACe,QAAQ,CAAC;UAACX,MAAM,EAAEK,IAAI,CAACL;QAAM,CAAC,CAAC;OACrC,CAAC,OAAAY,EAAA,EAAM;IACV,CAAC;;EAgBH;EAtCEnB,KAAA,CAAAoB,SAAA,CAAAC,iBAAiB,GAAjB;IACE,IAAI,CAACb,OAAO,GAAG,IAAI;IACnBc,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACd,SAAS,CAAC;EACpD,CAAC;EAEDT,KAAA,CAAAoB,SAAA,CAAAI,oBAAoB,GAApB;IACE,IAAI,CAAChB,OAAO,GAAG,KAAK;IACpBc,MAAM,CAACG,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAChB,SAAS,CAAC;EACvD,CAAC;EAgBDT,KAAA,CAAAoB,SAAA,CAAAH,GAAG,GAAH;IACE,OAAO,uBAAAS,MAAA,CAAuB,IAAI,CAACC,KAAK,CAACC,EAAE,0BAAuB;EACpE,CAAC;EAED5B,KAAA,CAAAoB,SAAA,CAAAS,MAAM,GAAN;IACS,IAAAvB,KAAK,GAAI,IAAI,CAAAA,KAAR;IACZ,IAAMC,MAAM,GAAGD,KAAK,CAACC,MAAM,IAAI,CAAC;IAEhC,OAAO,IAAI,CAACoB,KAAK,CAACG,UAAU,CAC1BrC,KAAA,CAAAsC,aAAA;MAAKC,KAAK,EAAAC,QAAA,CAAAA,QAAA,KAAMvC,UAAU;QAAEwC,MAAM,EAAE3B,MAAM,GAAG,mBAAmB,GAAG;MAAE;IAAA,GACnEd,KAAA,CAAAsC,aAAA;MAAQI,SAAS,EAAC,IAAI;MAACC,WAAW,EAAC,GAAG;MAACnB,GAAG,EAAE,IAAI,CAACA,GAAG,EAAE;MAAEe,KAAK,EAAAC,QAAA,CAAAA,QAAA,KAAMlC,WAAW;QAAEQ,MAAM,EAAAA;MAAA;IAAA,EAAK,CACvF,CACP;EACH,CAAC;EACH,OAAAP,KAAC;AAAD,CAAC,CA5CmBP,KAAK,CAAC4C,SAAS;AA8CnC,eAAerC,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}