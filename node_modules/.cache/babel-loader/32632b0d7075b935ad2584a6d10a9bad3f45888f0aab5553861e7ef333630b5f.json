{"ast":null,"code":"import { __assign } from \"tslib\";\nimport * as React from 'react';\nvar script = document.createElement('script');\nscript.type = 'text/javascript';\nscript.id = 'dropboxjs';\nvar DROPBOX_APP_KEY = window.DROPBOX_APP_KEY;\nif (DROPBOX_APP_KEY) script.setAttribute('data-app-key', DROPBOX_APP_KEY);\nscript.src = 'https://www.dropbox.com/static/api/2/dropins.js';\ndocument.body.append(script);\nvar DropboxUi = function (_a) {\n  var url = _a.url,\n    renderWrap = _a.renderWrap;\n  var ref = React.useRef();\n  React.useLayoutEffect(function () {\n    if (!ref.current) return;\n    var embed = Dropbox.embed({\n      link: url,\n      file: {\n        zoom: \"best\"\n      },\n      folder: {\n        view: \"list\",\n        headerSize: \"normal\"\n      }\n    }, ref.current);\n    return function () {\n      Dropbox.unmount(embed);\n    };\n  }, []);\n  return renderWrap(React.createElement(\"div\", {\n    ref: ref,\n    style: {\n      height: 500\n    }\n  }));\n};\nvar WithDropbox = function (props) {\n  var _a = React.useState(false),\n    ready = _a[0],\n    setReady = _a[1];\n  React.useEffect(function () {\n    var mounted = true;\n    var wait = function () {\n      if (!mounted) return;\n      if (typeof Dropbox !== 'undefined') {\n        setReady(true);\n        return;\n      }\n      setTimeout(wait, 100);\n    };\n    wait();\n    return function () {\n      mounted = false;\n    };\n  }, []);\n  if (!ready) return null;\n  return React.createElement(DropboxUi, __assign({}, props));\n};\nexport default WithDropbox;","map":{"version":3,"names":["React","script","document","createElement","type","id","DROPBOX_APP_KEY","window","setAttribute","src","body","append","DropboxUi","_a","url","renderWrap","ref","useRef","useLayoutEffect","current","embed","Dropbox","link","file","zoom","folder","view","headerSize","unmount","style","height","WithDropbox","props","useState","ready","setReady","useEffect","mounted","wait","setTimeout","__assign"],"sources":["../../../src/blocks/dropbox/index.tsx"],"sourcesContent":[null],"mappings":";AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAG9B,IAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;AAC/CF,MAAM,CAACG,IAAI,GAAG,iBAAiB;AAC/BH,MAAM,CAACI,EAAE,GAAG,WAAW;AACvB,IAAMC,eAAe,GAAIC,MAAc,CAACD,eAAe;AACvD,IAAIA,eAAe,EAAEL,MAAM,CAACO,YAAY,CAAC,cAAc,EAAEF,eAAe,CAAC;AACzEL,MAAM,CAACQ,GAAG,GAAG,iDAAiD;AAC9DP,QAAQ,CAACQ,IAAI,CAACC,MAAM,CAACV,MAAM,CAAC;AAI5B,IAAMW,SAAS,GAAyB,SAAAA,CAACC,EAAiB;MAAhBC,GAAG,GAAAD,EAAA,CAAAC,GAAA;IAAEC,UAAU,GAAAF,EAAA,CAAAE,UAAA;EACvD,IAAMC,GAAG,GAAGhB,KAAK,CAACiB,MAAM,EAAE;EAC1BjB,KAAK,CAACkB,eAAe,CAAC;IACpB,IAAI,CAACF,GAAG,CAACG,OAAO,EAAE;IAClB,IAAMC,KAAK,GAAIC,OAAe,CAACD,KAAK,CAAC;MACnCE,IAAI,EAAER,GAAG;MACTS,IAAI,EAAE;QACJC,IAAI,EAAE;OACP;MACDC,MAAM,EAAE;QACNC,IAAI,EAAE,MAAM;QACZC,UAAU,EAAE;;KAEf,EAAEX,GAAG,CAACG,OAAO,CAAC;IACf,OAAO;MACJE,OAAe,CAACO,OAAO,CAACR,KAAK,CAAC;IACjC,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,OAAOL,UAAU,CACff,KAAA,CAAAG,aAAA;IAAKa,GAAG,EAAEA,GAAU;IAAEa,KAAK,EAAE;MAACC,MAAM,EAAE;IAAG;EAAC,EAAI,CAC/C;AACH,CAAC;AAED,IAAMC,WAAW,GAAyB,SAAAA,CAACC,KAAK;EACxC,IAAAnB,EAAA,GAAoBb,KAAK,CAACiC,QAAQ,CAAC,KAAK,CAAC;IAAxCC,KAAK,GAAArB,EAAA;IAAEsB,QAAQ,GAAAtB,EAAA,GAAyB;EAC/Cb,KAAK,CAACoC,SAAS,CAAC;IACd,IAAIC,OAAO,GAAG,IAAI;IAClB,IAAMC,IAAI,GAAG,SAAAA,CAAA;MACX,IAAI,CAACD,OAAO,EAAE;MACd,IAAI,OAAOhB,OAAO,KAAK,WAAW,EAAE;QAClCc,QAAQ,CAAC,IAAI,CAAC;QACd;;MAEFI,UAAU,CAACD,IAAI,EAAE,GAAG,CAAC;IACvB,CAAC;IACDA,IAAI,EAAE;IACN,OAAO;MACLD,OAAO,GAAG,KAAK;IACjB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,IAAI,CAACH,KAAK,EAAE,OAAO,IAAI;EAEvB,OAAOlC,KAAA,CAAAG,aAAA,CAACS,SAAS,EAAA4B,QAAA,KAAKR,KAAK,EAAI;AACjC,CAAC;AAED,eAAeD,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}