{"ast":null,"code":"import { __extends } from \"tslib\";\nimport * as React from 'react';\nvar fontSize = 12;\nvar idCnt = 0;\nvar Gist = function (_super) {\n  __extends(Gist, _super);\n  function Gist() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.iframeNode = null;\n    _this.id = 'react-embed-gist-' + idCnt++;\n    return _this;\n  }\n  Gist.prototype.componentDidMount = function () {\n    this._updateIframeContent();\n  };\n  Gist.prototype.componentDidUpdate = function (prevProps, prevState) {\n    this._updateIframeContent();\n  };\n  Gist.prototype._defineUrl = function () {\n    var _a = this.props,\n      id = _a.id,\n      file = _a.file;\n    var fileArg = file ? \"?file=\".concat(file) : '';\n    return \"https://gist.github.com/\".concat(id, \".js\").concat(fileArg);\n  };\n  Gist.prototype._updateIframeContent = function () {\n    var iframe = this.iframeNode;\n    var doc = iframe.document;\n    if (iframe.contentDocument) doc = iframe.contentDocument;else if (iframe.contentWindow) doc = iframe.contentWindow.document;\n    var gistLink = this._defineUrl();\n    var gistScript = \"<script type=\\\"text/javascript\\\" src=\\\"\".concat(gistLink, \"\\\"></script>\");\n    var styles = \"<style>*{font-size:\".concat(fontSize, \"px;}</style>\");\n    var resizeScript = \"onload=\\\"parent.document.getElementById('\".concat(this.id, \"').style.height=document.body.scrollHeight + 'px'\\\"\");\n    var iframeHtml = \"<html><head><base target=\\\"_parent\\\">\".concat(styles, \"</head><body style=\\\"margin:0\\\" \").concat(resizeScript, \">\").concat(gistScript, \"</body></html>\");\n    doc.open();\n    doc.writeln(iframeHtml);\n    doc.close();\n  };\n  Gist.prototype.render = function () {\n    var _this = this;\n    var renderWrap = this.props.renderWrap;\n    return renderWrap(React.createElement(\"iframe\", {\n      id: this.id,\n      ref: function (n) {\n        _this.iframeNode = n;\n      },\n      width: \"100%\",\n      frameBorder: 0,\n      style: {\n        margin: \"0 0 -\".concat(fontSize, \"px\")\n      }\n    }));\n  };\n  return Gist;\n}(React.PureComponent);\nexport default Gist;","map":{"version":3,"names":["React","fontSize","idCnt","Gist","_super","__extends","_this","apply","arguments","iframeNode","id","prototype","componentDidMount","_updateIframeContent","componentDidUpdate","prevProps","prevState","_defineUrl","_a","props","file","fileArg","concat","iframe","doc","document","contentDocument","contentWindow","gistLink","gistScript","styles","resizeScript","iframeHtml","open","writeln","close","render","renderWrap","createElement","ref","n","width","frameBorder","style","margin","PureComponent"],"sources":["../../../src/blocks/gist/index.tsx"],"sourcesContent":[null],"mappings":";AAIA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAG9B,IAAMC,QAAQ,GAAG,EAAE;AAQnB,IAAIC,KAAK,GAAG,CAAC;AAEb,IAAAC,IAAA,aAAAC,MAAA;EAAmBC,SAAA,CAAAF,IAAA,EAAAC,MAAA;EAAnB,SAAAD,KAAA;IAAA,IAAAG,KAAA,GAAAF,MAAA,aAAAA,MAAA,CAAAG,KAAA,OAAAC,SAAA;IACEF,KAAA,CAAAG,UAAU,GAA6B,IAAI;IAC3CH,KAAA,CAAAI,EAAE,GAAG,mBAAmB,GAAGR,KAAK,EAAE;;EAmDpC;EAjDEC,IAAA,CAAAQ,SAAA,CAAAC,iBAAiB,GAAjB;IACE,IAAI,CAACC,oBAAoB,EAAE;EAC7B,CAAC;EAEDV,IAAA,CAAAQ,SAAA,CAAAG,kBAAkB,GAAlB,UAAmBC,SAAS,EAAEC,SAAS;IACrC,IAAI,CAACH,oBAAoB,EAAE;EAC7B,CAAC;EAEDV,IAAA,CAAAQ,SAAA,CAAAM,UAAU,GAAV;IACQ,IAAAC,EAAA,GAAa,IAAI,CAACC,KAAK;MAAtBT,EAAE,GAAAQ,EAAA,CAAAR,EAAA;MAAEU,IAAI,GAAAF,EAAA,CAAAE,IAAc;IAE7B,IAAMC,OAAO,GAAGD,IAAI,GAAG,SAAAE,MAAA,CAASF,IAAI,CAAE,GAAG,EAAE;IAE3C,OAAO,2BAAAE,MAAA,CAA2BZ,EAAE,SAAAY,MAAA,CAAMD,OAAO,CAAE;EACrD,CAAC;EAEDlB,IAAA,CAAAQ,SAAA,CAAAE,oBAAoB,GAApB;IACE,IAAMU,MAAM,GAAG,IAAI,CAACd,UAAW;IAE/B,IAAIe,GAAG,GAAID,MAAc,CAACE,QAAQ;IAClC,IAAIF,MAAM,CAACG,eAAe,EAAEF,GAAG,GAAGD,MAAM,CAACG,eAAe,CAAC,KACpD,IAAIH,MAAM,CAACI,aAAa,EAAEH,GAAG,GAAGD,MAAM,CAACI,aAAa,CAACF,QAAQ;IAElE,IAAMG,QAAQ,GAAG,IAAI,CAACX,UAAU,EAAE;IAClC,IAAMY,UAAU,GAAG,0CAAAP,MAAA,CAAuCM,QAAQ,iBAAa;IAC/E,IAAME,MAAM,GAAG,sBAAAR,MAAA,CAAsBrB,QAAQ,iBAAc;IAC3D,IAAM8B,YAAY,GAAG,4CAAAT,MAAA,CAA2C,IAAI,CAACZ,EAAE,wDAAoD;IAC3H,IAAMsB,UAAU,GAAG,wCAAAV,MAAA,CAAsCQ,MAAM,sCAAAR,MAAA,CAAiCS,YAAY,OAAAT,MAAA,CAAIO,UAAU,mBAAgB;IAE1IL,GAAG,CAACS,IAAI,EAAE;IACVT,GAAG,CAACU,OAAO,CAACF,UAAU,CAAC;IACvBR,GAAG,CAACW,KAAK,EAAE;EACb,CAAC;EAEDhC,IAAA,CAAAQ,SAAA,CAAAyB,MAAM,GAAN;IAAA,IAAA9B,KAAA;IACS,IAAA+B,UAAU,GAAI,IAAI,CAAClB,KAAK,CAAAkB,UAAd;IAEjB,OAAOA,UAAU,CACfrC,KAAA,CAAAsC,aAAA;MACE5B,EAAE,EAAE,IAAI,CAACA,EAAE;MACX6B,GAAG,EAAE,SAAAA,CAACC,CAAC;QACLlC,KAAI,CAACG,UAAU,GAAG+B,CAAC;MACrB,CAAC;MACDC,KAAK,EAAC,MAAM;MACZC,WAAW,EAAE,CAAC;MACdC,KAAK,EAAE;QAACC,MAAM,EAAE,QAAAtB,MAAA,CAAQrB,QAAQ;MAAI;IAAC,EACrC,CACH;EACH,CAAC;EACH,OAAAE,IAAC;AAAD,CAAC,CArDkBH,KAAK,CAAC6C,aAAa;AAuDtC,eAAe1C,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}